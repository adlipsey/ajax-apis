<!DOCTYPE html>
<html>
<head>
	<title>FailGifs</title>
	<script
  	src="https://code.jquery.com/jquery-3.2.1.min.js"
  	integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  	crossorigin="anonymous"></script>
  	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
  	<link rel="stylesheet" media="screen" href="https://fontlibrary.org/face/crass-roots-ofl" type="text/css"/>
  	<style> .fail-gif {padding: 10px; margin: 5px; border: 2px dashed black; width: 350px; height: auto; background: #ffc107;} .col-lg-6{ text-align: center;} .gif-row{margin: 5px;} html{background: url("./assets/images/hazard.jpg")no-repeat center center fixed; background-size: cover} body{background-color: transparent; color: white;} h1{padding:1em 0em 1.5em 0em; font-size: 50px; font-family: 'CRASSROOTSOFLREG'; transform: rotate(-8deg);} #controls{transform: rotate(3deg);} #content{transform: rotate(3deg); font-family: 'CRASSROOTSOFLREG'; font-size: 18px;}</style>
</head>
<body>
	<div class="container">
		<div class="row">
			<div class="col-lg-12">
				<h1>FAILURE IS ALWAYS AN OPTION</h1>
			</div>
		</div><!--End Row-->
		<div class="row">
			<div id="controls" class="col-lg-2">
				<h4>Things Failing:</h4>
				<div id="buttons"></div>
			</div>
			<div id="content" class="col-lg-10"></div>
		</div><!--End Row-->
	</div><!--End container-->

	<script type="text/javascript">
		//Global variables
		var apiKey = "iD2isJweAMLIM3EWgYMZnMCI7vYA0a40";
		var things = ["Kid", "Cat", "Dog", "Building", "Bridge", "Cartoon", "Old", "Stage", "Cake",  "Yoga", "Robot", "Infomercial", "Sports"];
		var bttn;
		var thing;
		var gifs;

		//Function to make buttons
		var makeButtons = function(things){
			things.forEach(function(name){
				bttn = $("<button />");
				bttn.text(name);
				bttn.addClass("btn btn-block btn-warning");
				bttn.appendTo($("#buttons"));
			});
		}

		makeButtons(things);

		//onClick event for buttons to trigger API call, get 10 gifs with button name + fail
		$("#buttons").on("click", ".btn", function(){
			$("#content").empty();
			thing = $(this).text();
			$.ajax({
				url: "https://api.giphy.com/v1/gifs/search?q="+thing+"+fail&api_key="+apiKey+"&limit=10&rating=pg-13",
				method: "GET"}).done(function(response){
					for(var i = 0; i < 10; i+=2){
						gifs = $("<div />");
						gifs.addClass("row gif-row");
						gifs.html("<div class='col-lg-6'><img id='"+response.data[i].id+"' class='fail-gif' src='"+response.data[i].images.original_still.url+"' alt='Gif of failure'><p>Rating: "+response.data[i].rating.toUpperCase()+"</p></div><div class='col-lg-6'><img id='"+response.data[i+1].id+"' class='fail-gif' src='"+response.data[i+1].images.original_still.url+"' alt='Gif of failure'><p>Rating: "+response.data[i+1].rating.toUpperCase()+"</p></div>");
						gifs.appendTo($("#content"));
					}
				});

		});

		//onClick event for gifs, if still, will play gif, if playing, will switch back to still
		$("#content").on("click", ".fail-gif", function(){
			var gifSrc = this.src;
			var thisGif = this.id;
			$.ajax({
				url: "https://api.giphy.com/v1/gifs/"+thisGif+"?api_key="+apiKey,
				method: "GET"}).done(function(response){
					console.log(gifSrc);
					if(gifSrc === response.data.images.original_still.url){
						$("#"+thisGif).attr("src", response.data.images.original.url);
					}
					else{
						$("#"+thisGif).attr("src", response.data.images.original_still.url);
					}
				});
		});
	</script>
</body>
</html>